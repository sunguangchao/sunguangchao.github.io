<!doctype html>



  


<html class="theme-next muse use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />












  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.0" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="数据库 MySQL," />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.1.0" />






<meta name="description" content="补充：123456mysql&amp;gt; SELECT * FROM table LIMIT 5,10;  // 检索记录行 6-15//为了检索从某一个偏移量到记录集的结束所有的记录行，可以指定第二个参数为 -1： mysql&amp;gt; SELECT * FROM table LIMIT 95,-1; // 检索记录行 96-last.//如果只给定一个参数，它表示返回最大的记录行数目： mysql&amp;">
<meta property="og:type" content="article">
<meta property="og:title" content="MySQL必知必会-上">
<meta property="og:url" content="http://yoursite.com/2017/06/17/MySQL必知必会-上/index.html">
<meta property="og:site_name" content="GuangchaoSun's Blog">
<meta property="og:description" content="补充：123456mysql&amp;gt; SELECT * FROM table LIMIT 5,10;  // 检索记录行 6-15//为了检索从某一个偏移量到记录集的结束所有的记录行，可以指定第二个参数为 -1： mysql&amp;gt; SELECT * FROM table LIMIT 95,-1; // 检索记录行 96-last.//如果只给定一个参数，它表示返回最大的记录行数目： mysql&amp;">
<meta property="og:updated_time" content="2017-06-17T11:04:48.216Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="MySQL必知必会-上">
<meta name="twitter:description" content="补充：123456mysql&amp;gt; SELECT * FROM table LIMIT 5,10;  // 检索记录行 6-15//为了检索从某一个偏移量到记录集的结束所有的记录行，可以指定第二个参数为 -1： mysql&amp;gt; SELECT * FROM table LIMIT 95,-1; // 检索记录行 96-last.//如果只给定一个参数，它表示返回最大的记录行数目： mysql&amp;">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    sidebar: {"position":"right","display":"post"},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/2017/06/17/MySQL必知必会-上/"/>





  <title> MySQL必知必会-上 | GuangchaoSun's Blog </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  










  
  
    
  

  <div class="container one-collumn sidebar-position-right page-post-detail ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-meta ">
  

  <div class="custom-logo-site-title">
    <a href="/"  class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">GuangchaoSun's Blog</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
  <p class="site-subtitle"></p>
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-books">
          <a href="/books" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-battery-1"></i> <br />
            
            书单
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            关于
          </a>
        </li>
      
        
        <li class="menu-item menu-item-commonweal">
          <a href="/404.html" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-heartbeat"></i> <br />
            
            公益404
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/06/17/MySQL必知必会-上/">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="GuangchaoSun">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="http://o90jubpdi.bkt.clouddn.com/QQ%E5%9B%BE%E7%89%8720160916204640.jpg">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="GuangchaoSun's Blog">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="GuangchaoSun's Blog" src="">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                MySQL必知必会-上
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-06-17T19:00:14+08:00">
              2017-06-17
            </time>

            &nbsp;|&nbsp;

            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-check-o"></i>
            </span>
            <time title="Post modified" itemprop="dateModified" datetime="2017-06-17T19:04:48+08:00">
              2017-06-17
            </time>
            
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/MySQL/" itemprop="url" rel="index">
                    <span itemprop="name">MySQL</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2017/06/17/MySQL必知必会-上/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2017/06/17/MySQL必知必会-上/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          

          
          

          
          
          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        <p>补充：<br><figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">mysql&gt; SELECT * FROM table LIMIT 5,10;  // 检索记录行 6-15</div><div class="line">//为了检索从某一个偏移量到记录集的结束所有的记录行，可以指定第二个参数为 -1： </div><div class="line">mysql&gt; SELECT * FROM table LIMIT 95,-1; // 检索记录行 96-last.</div><div class="line">//如果只给定一个参数，它表示返回最大的记录行数目： </div><div class="line">mysql&gt; SELECT * FROM table LIMIT 5;     //检索前 5 个记录行</div><div class="line">//换句话说，LIMIT n 等价于 LIMIT 0,n。</div></pre></td></tr></table></figure></p>
<a id="more"></a>
<h1 id="3-使用MySQL"><a href="#3-使用MySQL" class="headerlink" title="3. 使用MySQL"></a>3. 使用MySQL</h1><figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">SHOW</span> <span class="keyword">COLUMNS</span> <span class="keyword">FROM</span> from_names;</div><div class="line">= <span class="keyword">DESCRIBE</span> from_names;显示表列</div><div class="line"><span class="keyword">SHOW</span> <span class="keyword">STATUS</span>;用于显示广泛的服务器状态信息</div><div class="line"><span class="keyword">SHOW</span> <span class="keyword">CREATE</span> <span class="keyword">DATABASE</span>;和<span class="keyword">SHOW</span> <span class="keyword">CREATE</span> <span class="keyword">TABLES</span>;分别用来显示创建特定数据库或表的MySQL语句</div><div class="line"><span class="keyword">SHOW</span> <span class="keyword">GRANTS</span>;用来显示授予用户</div><div class="line"><span class="keyword">SHOW</span> <span class="keyword">ERRORS</span>;和<span class="keyword">SHOW</span> <span class="keyword">WARNING</span>;</div></pre></td></tr></table></figure>
<h1 id="4-SELECT语句"><a href="#4-SELECT语句" class="headerlink" title="4. SELECT语句"></a>4. SELECT语句</h1><figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">SELECT</span> prod_id,prod_name,prod_price <span class="keyword">FROM</span> products;检索多个列</div><div class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> products;检索所有列</div><div class="line"><span class="keyword">SELECT</span> <span class="keyword">DISTINCT</span> ven_id <span class="keyword">FROM</span> products;检索不同的行</div><div class="line"><span class="keyword">SELECT</span> prod_name <span class="keyword">FROM</span> products <span class="keyword">LIMIT</span> <span class="number">5</span>;返回结果的前5行</div><div class="line"><span class="keyword">SELECT</span> prod_name <span class="keyword">FROM</span> products <span class="keyword">LIMIT</span> <span class="number">5</span>,<span class="number">5</span>;返回从行5开始的5行</div></pre></td></tr></table></figure>
<p>有时候必须使用完全限定的表名</p>
<h1 id="5-排序检索数据"><a href="#5-排序检索数据" class="headerlink" title="5. 排序检索数据"></a>5. 排序检索数据</h1><figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">SELECT</span> prod_id, prod_price, prod_name</div><div class="line"><span class="keyword">FROM</span> products </div><div class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> prod_price, prod_name;</div><div class="line">检索三个列，并按其中两个列对结果进行排序。</div><div class="line"></div><div class="line"><span class="keyword">SELECT</span> prod_id, prod_price, prod_name</div><div class="line"><span class="keyword">FROM</span> products</div><div class="line"><span class="keyword">ORDER</span> <span class="keyword">by</span> prod_price <span class="keyword">DESC</span></div><div class="line">按价格以降序排序产品</div><div class="line">注：如果想在多个列上进行降序排序，必须对每个列指定<span class="keyword">DESC</span>关键字。</div><div class="line"></div><div class="line"><span class="keyword">SELECT</span> prod_id, prod_price, prod_name</div><div class="line"><span class="keyword">FROM</span> products </div><div class="line"><span class="keyword">ORDER</span> <span class="keyword">by</span> prod_price <span class="keyword">DESC</span> </div><div class="line"><span class="keyword">LIMIT</span> <span class="number">1</span></div><div class="line">使用<span class="keyword">ORDER</span>和<span class="keyword">LIMIT</span>的组合，可以找到一个列中的最高或最低值。</div></pre></td></tr></table></figure>
<h1 id="6-过滤数据"><a href="#6-过滤数据" class="headerlink" title="6. 过滤数据"></a>6. 过滤数据</h1><p>  只检索所需数据需要制定搜索条件(search criteria)，搜索条件也称为过滤条件(filter condition)。</p>
<h2 id="WHERE字句操作符"><a href="#WHERE字句操作符" class="headerlink" title="WHERE字句操作符"></a>WHERE字句操作符</h2><table>
<thead>
<tr>
<th>操作符</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>&lt;&gt;</td>
<td>不等于</td>
</tr>
<tr>
<td>!=</td>
<td>不等于</td>
</tr>
<tr>
<td>BETWEEN</td>
<td>在指定的两个值之间</td>
</tr>
</tbody>
</table>
<p>MySQL在匹配时不区分大小写<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">SELECT</span> prod_name,prod_price</div><div class="line"><span class="keyword">FROM</span> products</div><div class="line"><span class="keyword">WHERE</span> prod_price <span class="keyword">BETWEEN</span> <span class="number">5</span> <span class="keyword">AND</span> <span class="number">10</span></div><div class="line">范围匹配查找</div></pre></td></tr></table></figure></p>
<h1 id="7-数据过滤"><a href="#7-数据过滤" class="headerlink" title="7. 数据过滤"></a>7. 数据过滤</h1><p>  OR操作符与AND操作符不同，它指示MySQL检索匹配任一条件的行<br>  SQL（像多数语言一样）在处理OR操作符之前，优先处理AND操作符，所以说任何时候使用具有AND和OR操作符的WHERE字句，都应该使用圆括号明确地分组操作符。<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">SELECT</span> prod_name, prod_price</div><div class="line"><span class="keyword">FROM</span> students</div><div class="line"><span class="keyword">WHERE</span> vend_id <span class="keyword">IN</span> (<span class="number">1002</span>,<span class="number">1003</span>)</div><div class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> prod_name</div><div class="line"><span class="keyword">IN</span>操作符用来指定条件范围</div></pre></td></tr></table></figure></p>
<p>为什么要使用IN操作符？</p>
<ul>
<li>在使用长的合法选项清单时， IN操作符的语法更清楚且更直观。</li>
<li>在使用IN时，计算的次序更容易管理（因为使用的操作符更少）。</li>
<li>IN操作符一般比OR操作符清单执行更快。 </li>
<li>IN的最大优点是可以包含其他SELECT语句，使得能够更动态地建<br>立WHERE子句。 </li>
</ul>
<p>NOT操作符用于否定它之后跟的任何条件</p>
<h1 id="8-使用通配符进行过滤"><a href="#8-使用通配符进行过滤" class="headerlink" title="8. 使用通配符进行过滤"></a>8. 使用通配符进行过滤</h1><figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">SELECT</span> prod_id, prod_name</div><div class="line"><span class="keyword">FROM</span> products</div><div class="line"><span class="keyword">WHERE</span> prod_name <span class="keyword">LIKE</span> <span class="string">'jet%'</span></div><div class="line">% 表示任何字符出现任意次数(<span class="number">0</span>个，<span class="number">1</span>个或多个)</div><div class="line">_ 只匹配单个字符</div></pre></td></tr></table></figure>
<p>注意NULL:虽然%通配符可以匹配任何东西，但有个例外，就是不能匹配NULL。</p>
<p>通配符的技巧：</p>
<ul>
<li>不要过度使用通配符</li>
<li>在确实需要使用通配符时，除非有绝对必要，否则不要把他们用在搜索模式的开始处。因为这样是最慢的</li>
<li>注意通配符的位置</li>
</ul>
<h1 id="9-用正则表达式进行搜索"><a href="#9-用正则表达式进行搜索" class="headerlink" title="9. 用正则表达式进行搜索"></a>9. 用正则表达式进行搜索</h1><p>  <code>REGEXP</code>后所跟的东西作为正则表达式处理<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">SELECT</span> prod_name</div><div class="line"><span class="keyword">FROM</span> products</div><div class="line"><span class="keyword">WHERE</span> prod_name REGEXP <span class="string">'[1-5] Ton'</span></div><div class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> prod_name</div></pre></td></tr></table></figure></p>
<h2 id="LIKE与REGEXP"><a href="#LIKE与REGEXP" class="headerlink" title="LIKE与REGEXP"></a>LIKE与REGEXP</h2><p>在LIKE与REGEXP之间有一个重要的差别<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">SELECT</span> prod_name</div><div class="line"><span class="keyword">FROM</span> products</div><div class="line"><span class="keyword">WHERE</span> prod_name <span class="keyword">LIKE</span> <span class="string">'1000'</span></div><div class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> prod_name;</div><div class="line"></div><div class="line"><span class="keyword">SELECT</span> prod_name</div><div class="line"><span class="keyword">FROM</span> products</div><div class="line"><span class="keyword">WHERE</span> prod_name REGEXP <span class="string">'1000'</span></div><div class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> prod_name;</div></pre></td></tr></table></figure></p>
<p>如果执行上面两条语句，会发现第一条语句不返回数据，而第二条数据返回一行。为什么呢？<br>LIKE匹配整个列。如果被匹配的文本在列值中出现， LIKE将不会找到它，相应的行也不被返回（除非使用通配符）。而REGEXP在列值内进行匹配，如果被匹配的文本在列值中出现， REGEXP将会找到它，相应的行将被返回。这是一个非常重要的差别。<br><figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">mysql&gt; SELECT prod_name</div><div class="line">    -&gt; FROM products</div><div class="line">    -&gt; WHERE prod_name regexp '\\([0-9] sticks?\\)'</div><div class="line">    -&gt; ORDER BY prod_name;</div><div class="line">+----------------+</div><div class="line">| prod_name      |</div><div class="line">+----------------+</div><div class="line">| TNT (1 stick)  |</div><div class="line">| TNT (5 sticks) |</div><div class="line">+----------------+</div></pre></td></tr></table></figure></p>
<ul>
<li>匹配任何单一字符：<code>[]</code></li>
<li>MySQL中使用<code>\\</code>代表转义</li>
<li><code>\\.</code> 代表<code>.</code></li>
</ul>
<h2 id="匹配多个实例"><a href="#匹配多个实例" class="headerlink" title="匹配多个实例"></a>匹配多个实例</h2><table>
<thead>
<tr>
<th>元字符</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>*</td>
<td>0个或多个匹配</td>
</tr>
<tr>
<td>+</td>
<td>1个或多个匹配（等于{1，}）</td>
</tr>
<tr>
<td>?</td>
<td>0个或1个匹配（等于{0,1}）</td>
</tr>
<tr>
<td>{n}</td>
<td>指定数目的匹配</td>
</tr>
<tr>
<td>{n,}</td>
<td>不少于指定数目的匹配</td>
</tr>
<tr>
<td>{n,m}</td>
<td>匹配数目的范围（m不超过255）</td>
</tr>
</tbody>
</table>
<p>定位元字符<br>| 元字符     | 说明    |<br>| ——- | —– |<br>| ^       | 文本的开始 |<br>| $       | 文本的结尾 |<br>| [[:&lt;:]] | 词的开始  |<br>| [[:&gt;:]] | 词的结尾  |</p>
<h1 id="10-创建计算字段"><a href="#10-创建计算字段" class="headerlink" title="10. 创建计算字段"></a>10. 创建计算字段</h1><p>  拼接(concatenate)：将值联结到一起构成单个值<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line">在MySQL的<span class="keyword">SELECT</span>语句中，可使用<span class="keyword">Concat</span>()函数来拼接两个列</div><div class="line"><span class="keyword">SELECT</span> <span class="keyword">Concat</span>(vend_name, <span class="string">'('</span>, vend_country, <span class="string">')'</span>)</div><div class="line"><span class="keyword">FROM</span> vendors</div><div class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> vend_name;</div><div class="line"></div><div class="line">RTrim()：删除右侧多余的空格来整理数据</div><div class="line"><span class="keyword">SELECT</span> <span class="keyword">Concat</span>(<span class="keyword">RTrim</span>(vend_name), <span class="string">'('</span>, <span class="keyword">RTrim</span>(vend_country), <span class="string">')'</span>)</div><div class="line"><span class="keyword">FROM</span> vendors</div><div class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> vend_name;</div><div class="line"></div><div class="line">别名(alias)是一个字段或值的替换名，用AS关键字赋予</div><div class="line"><span class="keyword">SELECT</span> <span class="keyword">Concat</span>(<span class="keyword">RTrim</span>(vend_name), <span class="string">'('</span>, <span class="keyword">RTrim</span>(vend_country), <span class="string">')'</span>) <span class="keyword">AS</span> vend_title</div><div class="line"><span class="keyword">FROM</span> vendors</div><div class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> vend_name;</div><div class="line"></div><div class="line"><span class="keyword">SELECT</span> prod_id,</div><div class="line">       quantity,</div><div class="line">       item_price, </div><div class="line">       quantity*item_price <span class="keyword">AS</span> expanded_price</div><div class="line"><span class="keyword">FROM</span> orderitems</div><div class="line"><span class="keyword">WHERE</span> order_num = <span class="number">20005</span>;</div><div class="line">创建一个新的列expanded_price，来存放计算的值</div></pre></td></tr></table></figure></p>
<p>Concat()拼接串，即把多个串连接起来形成一个较长的串，参数之间用逗号分隔。</p>
<h1 id="11-使用数据处理函数"><a href="#11-使用数据处理函数" class="headerlink" title="11. 使用数据处理函数"></a>11. 使用数据处理函数</h1><p>   常用的文本处理函数：<br>| 函数          | 说明           |<br>| ———– | ———— |<br>| Left()      | 返回串左边的字符     |<br>| Length()    | 返回串的长度       |<br>| Locate()    | 找出串的一个子串     |<br>| Lower()     | 将串转换成小写      |<br>| LTrim()     | 去掉串左边的空格     |<br>| Right()     | 返回串右边的字符     |<br>| RTtim()     | 去掉串右边的空格     |<br>| Soundex()   | 返回串的SOUNDEX值 |<br>| SubString() | 返回子串的字符      |<br>| Upper()     | 将串转换为大写      |</p>
<p>SOUNDEX是一个将任何文本串转换为描述其语音表示的字母数字模式的算法。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">SELECT</span> cust_name, cust_contact</div><div class="line"><span class="keyword">FROM</span> customers</div><div class="line"><span class="keyword">WHERE</span> <span class="keyword">Soundex</span>(cust_contact) = <span class="keyword">Soundex</span>(<span class="string">"Y. Lie"</span>)</div><div class="line">匹配所有发音类似于Y. Lie的联系名</div><div class="line"></div><div class="line"><span class="keyword">SELECT</span> cust_id, order_num</div><div class="line"><span class="keyword">FROM</span> orders</div><div class="line"><span class="keyword">WHERE</span> <span class="built_in">Date</span>(order_date) = <span class="string">'2005-09-01'</span></div><div class="line"><span class="built_in">Date</span>(order_date)指示MySQL仅提取列的日期部分</div><div class="line"></div><div class="line"><span class="keyword">SELECT</span> cust_id, order_num</div><div class="line"><span class="keyword">FROM</span> orders</div><div class="line"><span class="keyword">WHERE</span> <span class="keyword">Year</span>(order_date) = <span class="number">2005</span> <span class="keyword">and</span> <span class="keyword">Month</span>(order_date) = <span class="number">9</span></div></pre></td></tr></table></figure>
<h1 id="12-汇总数据-important"><a href="#12-汇总数据-important" class="headerlink" title="12. 汇总数据(important)"></a>12. 汇总数据(important)</h1><p>   SQL聚集函数<br>| 函数      | 说明       |<br>| ——- | ——– |<br>| AVG()   | 返回某列的平均值 |<br>| COUNT() | 返回某列的行数  |<br>| MAX()   | 返回某列的最大值 |<br>| MIN()   | 返回某列的最小值 |<br>| SUM()   | 返回某列之和   |</p>
<p>COUNT()函数有两种使用方式</p>
<ul>
<li>使用COUNT(*)对表中行的数目进行计数，NULL也计算在内</li>
<li>使用COUNT(column)对特定列中具有值的行进行计数，忽略NULL值</li>
</ul>
<h1 id="13-分组数据"><a href="#13-分组数据" class="headerlink" title="13. 分组数据"></a>13. 分组数据</h1><p>   分组允许把数据分为多个逻辑组，以便能够对每个组进行聚集计算。<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">SELECT</span> vend_id,<span class="keyword">COUNT</span>(*) <span class="keyword">AS</span> num_prods</div><div class="line"><span class="keyword">FROM</span> products</div><div class="line">GTOUP <span class="keyword">BY</span> vend_id;</div><div class="line"></div><div class="line">+<span class="comment">---------+-----------+</span></div><div class="line">| vend_id | num_prods |</div><div class="line">+<span class="comment">---------+-----------+</span></div><div class="line">|    1001 |         3 |</div><div class="line">|    1002 |         2 |</div><div class="line">|    1003 |         7 |</div><div class="line">|    1005 |         2 |</div><div class="line">+<span class="comment">---------+-----------+</span></div><div class="line">4 rows in <span class="keyword">set</span> (<span class="number">0.00</span> sec)</div></pre></td></tr></table></figure></p>
<p>上面的SELECT语句指定了两个列，vend_id包含产品供应商的ID，num_prods为计算字段（用COUNT(*)函数建立）。 GROUP BY子句指示MySQL按vend_id排序并分组数据。这导致对每个vend_id而不是整个表计算num_prods一次。</p>
<p>注意事项：</p>
<ul>
<li>GROUP BY子句可以包含任意数目的列。这使得能对分组进行嵌套，为数据分组提供更细致的控制。</li>
<li>如果在GROUP BY子句中嵌套了分组，数据将在最后规定的分组上进行汇总。换句话说，在建立分组时，指定的所有列都一起计算（所以不能从个别的列取回数据）。</li>
<li>GROUP BY子句中列出的每个列都必须是检索列或有效的表达式（但不能是聚集函数）。如果在SELECT中使用表达式，则必须在GROUP BY子句中指定相同的表达式。不能使用别名。</li>
<li>除聚集计算语句外， SELECT语句中的每个列都必须在GROUP BY子句中给出。</li>
<li>如果分组列中具有NULL值，则NULL将作为一个分组返回。如果列中有多行NULL值，它们将分为一组。</li>
<li>GROUP BY子句必须出现在WHERE子句之后，ORDER BY子句之前。</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">SELECT</span> cust_id,<span class="keyword">COUNT</span>(*) <span class="keyword">AS</span> orders</div><div class="line"><span class="keyword">FROM</span> orders</div><div class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> cust_id</div><div class="line"><span class="keyword">HAVING</span> <span class="keyword">COUNT</span>(*) &gt;= <span class="number">2</span>;</div><div class="line"></div><div class="line">+<span class="comment">---------+--------+</span></div><div class="line">| cust_id | orders |</div><div class="line">+<span class="comment">---------+--------+</span></div><div class="line">|   10001 |      2 |</div><div class="line">+<span class="comment">---------+--------+</span></div><div class="line">1 row in <span class="keyword">set</span> (<span class="number">0.01</span> sec)</div></pre></td></tr></table></figure>
<p>HAVING和WHERE的差别：<br>WHERE在数据分组前进行过滤，HAVING在数据分组后进行过滤。</p>
<p><strong>例子：列出具有2个以上，价格为10以上的产品的供应商。</strong><br><figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">SELECT</span> vend_id,<span class="keyword">COUNT</span>(*) <span class="keyword">AS</span> num_prods</div><div class="line"><span class="keyword">FROM</span> products</div><div class="line"><span class="keyword">WHERE</span> prod_price &gt;= <span class="number">10</span></div><div class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> vend_id</div><div class="line"><span class="keyword">HAVING</span> <span class="keyword">COUNT</span>(*) &gt;= <span class="number">2</span>;</div><div class="line"></div><div class="line">+<span class="comment">---------+-----------+</span></div><div class="line">| vend_id | num_prods |</div><div class="line">+<span class="comment">---------+-----------+</span></div><div class="line">|    1003 |         4 |</div><div class="line">|    1005 |         2 |</div><div class="line">+<span class="comment">---------+-----------+</span></div><div class="line">2 rows in <span class="keyword">set</span> (<span class="number">0.00</span> sec)</div></pre></td></tr></table></figure></p>
<p>SELECT子句及其顺序<br>| 子句       | 说明        | 是否必须使用      |<br>| ——– | ——— | ———– |<br>| SELECT   | 要返回的列或表达式 | 是           |<br>| FROM     | 从中检索数据的表  | 仅在从表选择数据时使用 |<br>| WHERE    | 行级过滤      | 否           |<br>| GROUP BY | 分组说明      | 仅在按组计算聚集时使用 |<br>| HAVING   | 组级过滤      | 否           |<br>| ORDER BY | 输出排序顺序    | 否           |<br>| LIMIT    | 要检索的行数    | 否           |</p>
<p>检索总计订单价格大于等于50的订单的订单号和总订单价格，最後按总订单价格排序输出：<br><figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">mysql&gt; SELECT order_num, SUM(quantity*item_price) AS ordertotal</div><div class="line">    -&gt; FROM orderitems</div><div class="line">    -&gt; GROUP BY order_num</div><div class="line">    -&gt; HAVING SUM(quantity*item_price) &gt;= 50</div><div class="line">    -&gt; ORDER BY ordertotal;</div><div class="line">+-----------+------------+</div><div class="line">| order_num | ordertotal |</div><div class="line">+-----------+------------+</div><div class="line">|     20006 |      55.00 |</div><div class="line">|     20008 |     125.00 |</div><div class="line">|     20005 |     149.87 |</div><div class="line">|     20007 |    1000.00 |</div><div class="line">+-----------+------------+</div><div class="line">4 rows in set (0.00 sec)</div></pre></td></tr></table></figure></p>
<h1 id="14-使用子查询"><a href="#14-使用子查询" class="headerlink" title="14. 使用子查询"></a>14. 使用子查询</h1><p>   SQL允许创建子查询，即嵌套在其他查询中的查询。<br>   相关子查询(correlated)：涉及每部查询的子查询。</p>
<p>在SELECT语句中，子查询总是从内向外处理。</p>
<h1 id="15-联结表-join"><a href="#15-联结表-join" class="headerlink" title="15. 联结表(join)"></a>15. 联结表(join)</h1><p>   外键(foreign)：外键为某个表中的一列，它包含另一个表的主键值，定义了两个表之间的关系。<br>   如果数据存储在多个表中，怎样使用单条SELECT语句检索出数据？<br>   答案是使用联结，联结是一种机制，用来在一条SELECT语句中关联表。</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line">mysql&gt; SELECT vend_name, prod_name, prod_price</div><div class="line">    -&gt; FROM vendors, products</div><div class="line">    -&gt; WHERE vendors.vend_id = products.vend_id</div><div class="line">    -&gt; ORDER BY vend_name, prod_name;</div><div class="line">+-------------+----------------+------------+</div><div class="line">| vend_name   | prod_name      | prod_price |</div><div class="line">+-------------+----------------+------------+</div><div class="line">| ACME        | Bird seed      |      10.00 |</div><div class="line">| ACME        | Carrots        |       2.50 |</div><div class="line">| ACME        | Detonator      |      13.00 |</div><div class="line">| ACME        | Safe           |      50.00 |</div><div class="line">| ACME        | Sling          |       4.49 |</div><div class="line">| ACME        | TNT (1 stick)  |       2.50 |</div><div class="line">| ACME        | TNT (5 sticks) |      10.00 |</div><div class="line">| Anvils R Us | .5 ton anvil   |       5.99 |</div><div class="line">| Anvils R Us | 1 ton anvil    |       9.99 |</div><div class="line">| Anvils R Us | 2 ton anvil    |      14.99 |</div><div class="line">| Jet Set     | JetPack 1000   |      35.00 |</div><div class="line">| Jet Set     | JetPack 2000   |      55.00 |</div><div class="line">| LT Supplies | Fuses          |       3.42 |</div><div class="line">| LT Supplies | Oil can        |       8.99 |</div><div class="line">+-------------+----------------+------------+</div><div class="line">14 rows in set (0.00 sec)</div></pre></td></tr></table></figure>
<p>笛卡尔积(cartesian product)由没有联结条件的表返回的结果为笛卡尔积。检索出的行的数目将是第一个表中的行数乘以第二个表中的行数。</p>
<h1 id="16-创建高级联结"><a href="#16-创建高级联结" class="headerlink" title="16. 创建高级联结"></a>16. 创建高级联结</h1><h2 id="使用表别名"><a href="#使用表别名" class="headerlink" title="   使用表别名"></a>   使用表别名</h2><figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">mysql&gt; SELECT Concat(RTrim(vend_name), '(', RTrim(vend_country), ')') AS</div><div class="line">    -&gt; vend_title</div><div class="line">    -&gt; FROM vendors</div><div class="line">    -&gt; ORDER BY vend_name;</div><div class="line">+------------------------+</div><div class="line">| vend_title             |</div><div class="line">+------------------------+</div><div class="line">| ACME(USA)              |</div><div class="line">| Anvils R Us(USA)       |</div><div class="line">| Furball Inc.(USA)      |</div><div class="line">| Jet Set(England)       |</div><div class="line">| Jouets Et Ours(France) |</div><div class="line">| LT Supplies(USA)       |</div><div class="line">+------------------------+</div><div class="line">6 rows in set (0.00 sec)</div></pre></td></tr></table></figure>
<p>使用不同类型的联结</p>
<ul>
<li>等值联结</li>
<li>自联结</li>
<li>自然联结<ul>
<li>自然联结排除多次出现，使每个列只返回一次</li>
</ul>
</li>
<li>外部联结<ul>
<li>联结包含了那些在相关表中没有关联行的行。称为外部联结</li>
</ul>
</li>
</ul>
<h2 id="自联结"><a href="#自联结" class="headerlink" title="自联结:"></a>自联结:</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">SELECT</span> prod_id, prod_name</div><div class="line"><span class="keyword">FROM</span> products</div><div class="line"><span class="keyword">WHERE</span> vend_id = (<span class="keyword">SELECT</span> vend_id</div><div class="line">                <span class="keyword">FROM</span> products</div><div class="line">                <span class="keyword">WHERE</span> prod_id = <span class="string">'DTNTR'</span>);</div><div class="line">                </div><div class="line">使用联结的相同查询：</div><div class="line"><span class="keyword">SELECT</span> p1.prod_id,p1.prod_name</div><div class="line"><span class="keyword">FROM</span> products <span class="keyword">AS</span> p1, products <span class="keyword">AS</span> p2</div><div class="line"><span class="keyword">WHERE</span> p1.vend_id = p2.vend_id</div><div class="line"><span class="keyword">AND</span> p2.prod_id = <span class="string">'DTNTR'</span>;</div></pre></td></tr></table></figure>
<p>假如你发现某物品（其ID为DTNTR）存在问题，因此想知道生产该物品的供应商生产的其他物品是否也存在这些问题。此查询要求首先找到生产ID为DTNTR的物品的供应商，然后找出这个供应商生产的其他物品。</p>
<h2 id="自然联结："><a href="#自然联结：" class="headerlink" title="自然联结："></a>自然联结：</h2><p>自然联结排除多次出现，使每个列只返回一次。<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">SELECT</span> c.*, o.order_num, o.order_date,</div><div class="line">       oi.prod_id, oi.quantity, OI.item_price</div><div class="line"><span class="keyword">FROM</span> customers <span class="keyword">AS</span> c, orders <span class="keyword">AS</span> o, orderitems <span class="keyword">AS</span> oi</div><div class="line"><span class="keyword">WHERE</span> c.cust_id = o.cust_id</div><div class="line"><span class="keyword">AND</span> oi.order_num = o.order_num</div><div class="line"><span class="keyword">AND</span> prod_id = <span class="string">'FB'</span>;</div></pre></td></tr></table></figure></p>
<h2 id="外部联结："><a href="#外部联结：" class="headerlink" title="外部联结："></a>外部联结：</h2><figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div></pre></td><td class="code"><pre><div class="line">mysql&gt; SELECT customers.cust_id, orders.order_num</div><div class="line">    -&gt; FROM customers LEFT OUTER JOIN orders</div><div class="line">    -&gt; ON customers.cust_id = orders.cust_id;</div><div class="line">+---------+-----------+</div><div class="line">| cust_id | order_num |</div><div class="line">+---------+-----------+</div><div class="line">|   10001 |     20005 |</div><div class="line">|   10001 |     20009 |</div><div class="line">|   10002 |      NULL |</div><div class="line">|   10003 |     20006 |</div><div class="line">|   10004 |     20007 |</div><div class="line">|   10005 |     20008 |</div><div class="line">+---------+-----------+</div><div class="line">6 rows in set (0.00 sec)</div><div class="line">//下面看一下若如果换成内联结的结果：</div><div class="line">mysql&gt; SELECT customers.cust_id, orders.order_num</div><div class="line">    -&gt; FROM customers INNER JOIN orders</div><div class="line">    -&gt; ON customers.cust_id = orders.cust_id;</div><div class="line">+---------+-----------+</div><div class="line">| cust_id | order_num |</div><div class="line">+---------+-----------+</div><div class="line">|   10001 |     20005 |</div><div class="line">|   10001 |     20009 |</div><div class="line">|   10003 |     20006 |</div><div class="line">|   10004 |     20007 |</div><div class="line">|   10005 |     20008 |</div><div class="line">+---------+-----------+</div><div class="line">5 rows in set (0.00 sec)</div></pre></td></tr></table></figure>
<p>检索所有客户即每个客户所下的订单数<br><figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">mysql&gt; SELECT customers.cust_name,</div><div class="line">    -&gt;        customers.cust_id,</div><div class="line">    -&gt;        COUNT(orders.order_num) AS num_ord</div><div class="line">    -&gt; FROM customers INNER JOIN orders</div><div class="line">    -&gt; ON customers.cust_id = orders.cust_id</div><div class="line">    -&gt; GROUP BY customers.cust_id;</div><div class="line">+----------------+---------+---------+</div><div class="line">| cust_name      | cust_id | num_ord |</div><div class="line">+----------------+---------+---------+</div><div class="line">| Coyote Inc.    |   10001 |       2 |</div><div class="line">| Wascals        |   10003 |       1 |</div><div class="line">| Yosemite Place |   10004 |       1 |</div><div class="line">| E Fudd         |   10005 |       1 |</div><div class="line">+----------------+---------+---------+</div><div class="line">4 rows in set (0.00 sec)</div></pre></td></tr></table></figure></p>
<p>使用联结和联结条件：</p>
<ul>
<li>注意所使用的联结类型。一般而言我们使用内部联结，但使用外部联结也是有效的</li>
<li>保证使用正确的联结条件，否则将返回不正确的数据</li>
<li>应该总是提供联结条件，否则会得出笛卡尔积</li>
<li>在一个联结中可以包含多个表，甚至对于每个联结可以采用不同的联结类型。</li>
</ul>
<h1 id="17-组合查询"><a href="#17-组合查询" class="headerlink" title="17. 组合查询"></a>17. 组合查询</h1><p>   组合查询的使用条件：</p>
<ul>
<li>在单个查询中从不同的表返回类似结构的数据</li>
<li>对单个表执行多个查询，按单个查询返回数据</li>
</ul>
<h2 id="UNION规则："><a href="#UNION规则：" class="headerlink" title="UNION规则："></a>UNION规则：</h2><ul>
<li>UNION必须由两条或两条以上的SELECT语句组成，语句之间用关键字UNION分隔</li>
<li>UNION中的每个查询必须包含相同的列、表达式或聚集函数</li>
<li>列数据必须兼容：类型不必完全相同，但必须是DBMS可以隐含地转换的类型。</li>
</ul>
<p>注：UNION从查询结果集中自动去除了重复的行，这是UNION的默认行为。如果想返回所有匹配行，可使用<code>UNION ALL</code></p>
<h1 id="18-全文本搜索"><a href="#18-全文本搜索" class="headerlink" title="18. 全文本搜索"></a>18. 全文本搜索</h1><h2 id="启用全文本搜索：为了进行全文本搜索，必须索引被搜索的列，而且要随着数据的改变不断地重新索引。"><a href="#启用全文本搜索：为了进行全文本搜索，必须索引被搜索的列，而且要随着数据的改变不断地重新索引。" class="headerlink" title="   启用全文本搜索：为了进行全文本搜索，必须索引被搜索的列，而且要随着数据的改变不断地重新索引。"></a>   启用全文本搜索：为了进行全文本搜索，必须索引被搜索的列，而且要随着数据的改变不断地重新索引。</h2><p>CREATE TABLE语句接受FULLTEXT()子句，它给出被索引列的一个逗号分隔的列表</p>
<h2 id="进行全文本搜索"><a href="#进行全文本搜索" class="headerlink" title="进行全文本搜索"></a>进行全文本搜索</h2><p>Match()指定被搜索的列，传递给Match()的值必须与FULLTEXT()定义中相同。如果指定多个列，则必须列出他们（而且次序正确）</p>
<p>Against()指定要使用的搜索表达式<br><figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">mysql&gt; SELECT note_text</div><div class="line">    -&gt; FROM productnotes</div><div class="line">    -&gt; WHERE Match(note_text) Against('rabbit');</div><div class="line">+----------------------------------------------------------------------------------------------------------------------+</div><div class="line">| note_text                                                                                                            |</div><div class="line">+----------------------------------------------------------------------------------------------------------------------+</div><div class="line">| Customer complaint: rabbit has been able to detect trap, food apparently less effective now.                         |</div><div class="line">| Quantity varies, sold by the sack load.</div><div class="line">All guaranteed to be bright and orange, and suitable for use as rabbit bait. |</div><div class="line">+----------------------------------------------------------------------------------------------------------------------+</div><div class="line">2 rows in set (0.00 sec)</div></pre></td></tr></table></figure></p>
<h2 id="使用查询扩展"><a href="#使用查询扩展" class="headerlink" title="使用查询扩展"></a>使用查询扩展</h2><p>查询扩展用来放宽所返回的全文本搜索结果的范围<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">SELECT</span> note_text</div><div class="line"><span class="keyword">FROM</span> productnotes</div><div class="line"><span class="keyword">WHERE</span> Math(note_text) Against(<span class="string">'anvils'</span> <span class="keyword">WITH</span> <span class="keyword">QUERY</span> EXCEPITON);</div></pre></td></tr></table></figure></p>

      
    </div>

    <div>
      
        

      
    </div>

    <div>
      
        

      
    </div>


    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/数据库-MySQL/" rel="tag"># 数据库 MySQL</a>
          
        </div>
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2017/06/14/面试题总结/" rel="next" title="面试题总结">
                <i class="fa fa-chevron-left"></i> 面试题总结
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2017/06/24/MySQL必知必会-下/" rel="prev" title="MySQL必知必会-下">
                MySQL必知必会-下 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          
  <div class="comments" id="comments">
    
      <div class="ds-thread" data-thread-key="2017/06/17/MySQL必知必会-上/"
           data-title="MySQL必知必会-上" data-url="http://yoursite.com/2017/06/17/MySQL必知必会-上/">
      </div>
    
  </div>


        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap" >
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="http://o90jubpdi.bkt.clouddn.com/QQ%E5%9B%BE%E7%89%8720160916204640.jpg"
               alt="GuangchaoSun" />
          <p class="site-author-name" itemprop="name">GuangchaoSun</p>
          <p class="site-description motion-element" itemprop="description">coding change the world</p>
        </div>
        <nav class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/archives">
              <span class="site-state-item-count">51</span>
              <span class="site-state-item-name">日志</span>
            </a>
          </div>

          
            <div class="site-state-item site-state-categories">
              <a href="/categories">
                <span class="site-state-item-count">12</span>
                <span class="site-state-item-name">分类</span>
              </a>
            </div>
          

          
            <div class="site-state-item site-state-tags">
              <a href="/tags">
                <span class="site-state-item-count">20</span>
                <span class="site-state-item-name">标签</span>
              </a>
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="https://github.com/sunguangchao" target="_blank" title="GitHub">
                  
                    <i class="fa fa-fw fa-github"></i>
                  
                  GitHub
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="https://www.zhihu.com/people/sun-guang-chao-64" target="_blank" title="知乎">
                  
                    <i class="fa fa-fw fa-delicious"></i>
                  
                  知乎
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="http://weibo.com/2966219821/profile?topnav=1&wvr=6" target="_blank" title="Weibo">
                  
                    <i class="fa fa-fw fa-weibo"></i>
                  
                  Weibo
                </a>
              </span>
            
          
        </div>

        
        

        
        

        


      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#3-使用MySQL"><span class="nav-number">1.</span> <span class="nav-text">3. 使用MySQL</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#4-SELECT语句"><span class="nav-number">2.</span> <span class="nav-text">4. SELECT语句</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#5-排序检索数据"><span class="nav-number">3.</span> <span class="nav-text">5. 排序检索数据</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#6-过滤数据"><span class="nav-number">4.</span> <span class="nav-text">6. 过滤数据</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#WHERE字句操作符"><span class="nav-number">4.1.</span> <span class="nav-text">WHERE字句操作符</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#7-数据过滤"><span class="nav-number">5.</span> <span class="nav-text">7. 数据过滤</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#8-使用通配符进行过滤"><span class="nav-number">6.</span> <span class="nav-text">8. 使用通配符进行过滤</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#9-用正则表达式进行搜索"><span class="nav-number">7.</span> <span class="nav-text">9. 用正则表达式进行搜索</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#LIKE与REGEXP"><span class="nav-number">7.1.</span> <span class="nav-text">LIKE与REGEXP</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#匹配多个实例"><span class="nav-number">7.2.</span> <span class="nav-text">匹配多个实例</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#10-创建计算字段"><span class="nav-number">8.</span> <span class="nav-text">10. 创建计算字段</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#11-使用数据处理函数"><span class="nav-number">9.</span> <span class="nav-text">11. 使用数据处理函数</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#12-汇总数据-important"><span class="nav-number">10.</span> <span class="nav-text">12. 汇总数据(important)</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#13-分组数据"><span class="nav-number">11.</span> <span class="nav-text">13. 分组数据</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#14-使用子查询"><span class="nav-number">12.</span> <span class="nav-text">14. 使用子查询</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#15-联结表-join"><span class="nav-number">13.</span> <span class="nav-text">15. 联结表(join)</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#16-创建高级联结"><span class="nav-number">14.</span> <span class="nav-text">16. 创建高级联结</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#使用表别名"><span class="nav-number">14.1.</span> <span class="nav-text">   使用表别名</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#自联结"><span class="nav-number">14.2.</span> <span class="nav-text">自联结:</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#自然联结："><span class="nav-number">14.3.</span> <span class="nav-text">自然联结：</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#外部联结："><span class="nav-number">14.4.</span> <span class="nav-text">外部联结：</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#17-组合查询"><span class="nav-number">15.</span> <span class="nav-text">17. 组合查询</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#UNION规则："><span class="nav-number">15.1.</span> <span class="nav-text">UNION规则：</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#18-全文本搜索"><span class="nav-number">16.</span> <span class="nav-text">18. 全文本搜索</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#启用全文本搜索：为了进行全文本搜索，必须索引被搜索的列，而且要随着数据的改变不断地重新索引。"><span class="nav-number">16.1.</span> <span class="nav-text">   启用全文本搜索：为了进行全文本搜索，必须索引被搜索的列，而且要随着数据的改变不断地重新索引。</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#进行全文本搜索"><span class="nav-number">16.2.</span> <span class="nav-text">进行全文本搜索</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#使用查询扩展"><span class="nav-number">16.3.</span> <span class="nav-text">使用查询扩展</span></a></li></ol></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2018</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">GuangchaoSun</span>
</div>


<div class="powered-by">
  由 <a class="theme-link" href="https://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Muse
  </a>
</div>


        

        
      </div>
    </footer>

    <div class="back-to-top">
      <i class="fa fa-arrow-up"></i>
    </div>
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  



  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.0"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.0"></script>



  
  

  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.0"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.0"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.0"></script>



  

  
    
  

  <script type="text/javascript">
    var duoshuoQuery = {short_name:"sunguangchao"};
    (function() {
      var ds = document.createElement('script');
      ds.type = 'text/javascript';ds.async = true;
      ds.id = 'duoshuo-script';
      ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
      ds.charset = 'UTF-8';
      (document.getElementsByTagName('head')[0]
      || document.getElementsByTagName('body')[0]).appendChild(ds);
    })();
  </script>

  
    
    
    <script src="/lib/ua-parser-js/dist/ua-parser.min.js?v=0.7.9"></script>
    <script src="/js/src/hook-duoshuo.js"></script>
  








  
  

  

  

  

  


</body>
</html>
